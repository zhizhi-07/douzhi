# 🎬 AI导演控制台日志说明

发布朋友圈后，打开浏览器控制台（F12 / Ctrl+Shift+J），可以看到完整的AI导演编排过程。

## 📋 日志内容

### 1️⃣ 开始阶段
```
🎬🎬🎬🎬🎬🎬🎬🎬🎬🎬🎬🎬🎬🎬🎬🎬🎬🎬🎬🎬
🎭 AI导演开始工作...
👥 参与角色: 汁汁、小明、老王
📱 朋友圈内容: 今天好累
🎬🎬🎬🎬🎬🎬🎬🎬🎬🎬🎬🎬🎬🎬🎬🎬🎬🎬🎬🎬
```

### 2️⃣ 导演输入（完整提示词）
```
================================================================================
🎬 AI导演编排场景 - 完整输入
================================================================================
# 🎭 你是一个专业的编剧导演，要编排一场有戏剧张力的朋友圈互动

## 朋友圈内容
作者：我
内容：今天好累
配图：0张

## 最近朋友圈动态（供你了解角色互动模式）
1. 我: xxx
   点赞：汁汁、小明
   评论：
     汁汁: xxx

## 角色关系网络
### 汁汁
- 性格：傲娇毒舌
- 和用户的关系：聊过100条消息，关系亲密度可从聊天记录判断
最近的聊天记录(100条)：
[2024-11-07] 用户: 今天好无聊
[2024-11-07] AI: tsk...那就来找我啊

### 小明
- 性格：温柔体贴
...

## 🎬 你的任务
...

⚠️ **关键限制：角色认知范围**
- 角色只能看到朋友圈内容、已有评论、自己的聊天记录
- 不能表现出知道其他角色的信息
...

================================================================================

📤 发送给AI的完整请求:
System Prompt: 你是一个专业的互动场景导演...
Temperature: 1.2
Max Tokens: 1000
```

### 3️⃣ AI原始响应
```
================================================================================
💬 AI导演的完整响应
================================================================================
场景:傲娇互动
点赞|汁汁|汁汁|5||
评论|汁汁|汁汁|10|哈？大白天发什么神经🙄|
私聊|汁汁|汁汁|12|喂，到底怎么了？跟我说说|
评论|小明|小明|15|怎么啦宝贝？||
评论|汁汁|汁汁|20|@小明 你谁啊？|小明
沉默|老王|老王|0||
================================================================================
```

### 4️⃣ 编排结果
```
✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨
✨ 场景编排结果
✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨
🎬 场景: 傲娇互动
📖 戏剧分析: 傲娇互动
📋 共编排了 6 个动作
✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨
```

### 5️⃣ 动作时间表
```
📅 动作时间表:

1. ⏱️ 汁汁 - 5秒后点赞
   📝 理由: 点赞

2. ⏱️ 汁汁 - 10秒后评论
   📝 理由: 评论
   💬 评论: 哈？大白天发什么神经🙄

3. ⏱️ 汁汁 - 12秒后私聊
   📝 理由: 私聊
   📱 私聊: 喂，到底怎么了？跟我说说

4. ⏱️ 小明 - 15秒后评论
   📝 理由: 评论
   💬 评论: 怎么啦宝贝？

5. ⏱️ 汁汁 - 20秒后评论
   📝 理由: 评论
   💬 评论: @小明 你谁啊？
   ↪️  回复: 小明

6. ⏱️ 老王 - 0秒后不互动
   📝 理由: 选择沉默
```

### 6️⃣ 实时执行
```
▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️
▶️  执行动作: 汁汁 点赞
▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️
👍 汁汁 点赞了！

（10秒后）
▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️
▶️  执行动作: 汁汁 评论
▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️
💬 汁汁 评论: 哈？大白天发什么神经🙄

（12秒后）
▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️
▶️  执行动作: 汁汁 私聊
▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️▶️
📱 汁汁 准备发送私聊...
💾 私聊消息已保存到localStorage: chat_messages_汁汁
🔔 已触发通知
🔴 已增加未读数
✨ 已触发storage事件刷新
✅ 汁汁 私聊完成: 喂，到底怎么了？跟我说说
```

## 🎯 如何使用

1. 打开浏览器控制台（F12）
2. 发布一条朋友圈
3. 等待3秒后，导演开始工作
4. 查看完整的编排过程和执行日志
5. 观察角色是否有上帝视角（不应该有！）

## 🔍 检查要点

### ✅ 正确的编排
- 角色的评论基于朋友圈内容和已有评论
- 私聊内容符合角色和用户的关系
- 没有角色表现出知道其他角色的秘密

### ❌ 错误的编排（上帝视角）
- 角色直接说"你这个小三"（怎么知道？）
- 角色说"你们俩是不是在一起了"（怎么知道？）
- 角色提到别人的聊天内容（怎么知道？）

## 💡 调试技巧

如果发现AI编排不合理：
1. 查看完整输入，确认提示词是否清晰
2. 查看AI原始响应，看AI是否理解要求
3. 检查角色的台词是否符合认知范围
4. 如果有问题，可以调整提示词模板

## 📁 相关文件

- `src/utils/momentsAI/director.ts` - 主控制器
- `src/utils/momentsAI/promptTemplate.ts` - 提示词模板
- `src/utils/momentsAI/README.md` - 架构文档
