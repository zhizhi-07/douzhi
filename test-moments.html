<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æœ‹å‹åœˆåŠŸèƒ½æµ‹è¯•</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
      max-width: 600px;
      margin: 50px auto;
      padding: 20px;
      background: #f5f5f5;
    }
    .card {
      background: white;
      padding: 20px;
      margin: 20px 0;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    button {
      padding: 10px 20px;
      margin: 5px;
      border: none;
      border-radius: 8px;
      background: #1aad19;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background: #179b16;
    }
    .danger {
      background: #e64340;
    }
    .danger:hover {
      background: #ce3c39;
    }
    pre {
      background: #f5f5f5;
      padding: 10px;
      border-radius: 8px;
      overflow-x: auto;
      font-size: 12px;
    }
  </style>
</head>
<body>
  <h1>æœ‹å‹åœˆåŠŸèƒ½æµ‹è¯•</h1>
  
  <div class="card">
    <h2>1. åˆå§‹åŒ–æµ‹è¯•æ•°æ®</h2>
    <button onclick="initTestData()">åˆ›å»ºæµ‹è¯•æœ‹å‹åœˆ</button>
    <button onclick="clearData()" class="danger">æ¸…ç©ºæ‰€æœ‰æ•°æ®</button>
  </div>
  
  <div class="card">
    <h2>2. æŸ¥çœ‹æ•°æ®</h2>
    <button onclick="viewData()">æŸ¥çœ‹æœ‹å‹åœˆæ•°æ®</button>
    <pre id="dataDisplay"></pre>
  </div>
  
  <div class="card">
    <h2>3. åŠŸèƒ½æµ‹è¯•</h2>
    <button onclick="testLike()">æµ‹è¯•ç‚¹èµ</button>
    <button onclick="testComment()">æµ‹è¯•è¯„è®º</button>
    <button onclick="testDelete()">æµ‹è¯•åˆ é™¤</button>
  </div>
  
  <div class="card">
    <h2>4. è®¿é—®é¡µé¢</h2>
    <a href="http://localhost:5173/moments" target="_blank">
      <button>æ‰“å¼€æœ‹å‹åœˆé¡µé¢</button>
    </a>
    <a href="http://localhost:5173/publish-moment" target="_blank">
      <button>æ‰“å¼€å‘å¸ƒé¡µé¢</button>
    </a>
  </div>

  <script>
    function initTestData() {
      const testMoments = [
        {
          id: Date.now().toString(),
          userId: 'user',
          userName: 'æˆ‘',
          userAvatar: 'ğŸ‘¤',
          content: 'ä»Šå¤©å¤©æ°”çœŸå¥½â˜€ï¸',
          images: [],
          likes: [],
          comments: [],
          createdAt: Date.now()
        },
        {
          id: (Date.now() - 1000).toString(),
          userId: 'ai1',
          userName: 'å°é›ª',
          userAvatar: 'â„ï¸',
          content: 'åˆšåƒäº†å¥½åƒçš„ç«é”…ğŸ²',
          images: [],
          likes: [],
          comments: [],
          location: 'æµ·åº•æç«é”…',
          createdAt: Date.now() - 1000
        }
      ]
      
      localStorage.setItem('moments', JSON.stringify(testMoments))
      alert('âœ… æµ‹è¯•æ•°æ®å·²åˆ›å»ºï¼')
      viewData()
    }
    
    function clearData() {
      if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰æœ‹å‹åœˆæ•°æ®å—ï¼Ÿ')) {
        localStorage.removeItem('moments')
        alert('âœ… æ•°æ®å·²æ¸…ç©º')
        viewData()
      }
    }
    
    function viewData() {
      const moments = JSON.parse(localStorage.getItem('moments') || '[]')
      document.getElementById('dataDisplay').textContent = 
        JSON.stringify(moments, null, 2)
    }
    
    function testLike() {
      const moments = JSON.parse(localStorage.getItem('moments') || '[]')
      if (moments.length === 0) {
        alert('âŒ æ²¡æœ‰æœ‹å‹åœˆæ•°æ®ï¼Œè¯·å…ˆåˆå§‹åŒ–')
        return
      }
      
      const firstMoment = moments[0]
      firstMoment.likes.push({
        id: Date.now().toString(),
        userId: 'user',
        userName: 'æˆ‘',
        userAvatar: 'ğŸ‘¤'
      })
      
      localStorage.setItem('moments', JSON.stringify(moments))
      alert('âœ… ç‚¹èµæˆåŠŸï¼')
      viewData()
    }
    
    function testComment() {
      const moments = JSON.parse(localStorage.getItem('moments') || '[]')
      if (moments.length === 0) {
        alert('âŒ æ²¡æœ‰æœ‹å‹åœˆæ•°æ®ï¼Œè¯·å…ˆåˆå§‹åŒ–')
        return
      }
      
      const firstMoment = moments[0]
      firstMoment.comments.push({
        id: Date.now().toString(),
        userId: 'user',
        userName: 'æˆ‘',
        userAvatar: 'ğŸ‘¤',
        content: 'æµ‹è¯•è¯„è®º',
        createdAt: Date.now()
      })
      
      localStorage.setItem('moments', JSON.stringify(moments))
      alert('âœ… è¯„è®ºæˆåŠŸï¼')
      viewData()
    }
    
    function testDelete() {
      const moments = JSON.parse(localStorage.getItem('moments') || '[]')
      if (moments.length === 0) {
        alert('âŒ æ²¡æœ‰æœ‹å‹åœˆæ•°æ®')
        return
      }
      
      moments.shift()
      localStorage.setItem('moments', JSON.stringify(moments))
      alert('âœ… åˆ é™¤æˆåŠŸï¼')
      viewData()
    }
    
    // é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºæ•°æ®
    window.onload = viewData
  </script>
</body>
</html>
