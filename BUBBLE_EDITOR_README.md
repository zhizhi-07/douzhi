# 🎨 气泡编辑器 - 独立插件

一个可视化的聊天气泡样式设计工具，无需编写CSS代码即可设计专属气泡样式。

## 📍 访问方式

### 方式1：独立页面
直接打开 `bubble-editor.html` 文件

### 方式2：网页路由
访问 `http://localhost:5173/#/bubble-editor`

### 方式3：集成到系统设置（可选）
在 `src/pages/Customize.tsx` 中添加条目

---

## ✨ 核心功能

### 1. **可视化编辑**
- 🎨 **颜色选择器**：点击色块即可选择颜色
- 📏 **滑块调整**：拖动滑块调整圆角、内边距、阴影
- 🔄 **实时预览**：调整参数后立即看到效果

### 2. **预设样式库**
内置4种精美样式：
- **默认样式**：经典黑白配色
- **紫色渐变**：优雅的渐变效果
- **水滴气泡**：带高光的立体气泡
- **现代深色**：米白+深色+橙色强调

### 3. **CSS代码管理**
- 📋 **自动生成CSS**：根据参数实时生成代码
- 📝 **代码预览**：查看生成的CSS代码
- 📤 **一键复制**：复制CSS代码到其他应用

### 4. **样式应用**
- 💾 **保存到全局**：应用到所有聊天
- 🎯 **保存到单聊**：单独为某个角色设置（TODO）
- 🔄 **实时生效**：保存后立即应用到聊天界面

---

## 🎯 UI设计风格

参考现代金融App设计，采用：
- **配色**：米白色背景 `#F5F5F0` + 深色卡片 `#1A1A1A` + 橙色强调 `#FF6B35`
- **卡片**：大圆角（20px）、白色背景、阴影效果
- **排版**：大标题粗体 + 小文字灰色，层次分明
- **交互**：宽松的padding，呼吸感强

---

## 📖 使用教程

### 基础使用

1. **快速开始**
   - 点击"预设样式"中的任意样式
   - 立即在右侧看到预览效果

2. **自定义样式**
   - 调整左侧的颜色、圆角、内边距等参数
   - 右侧实时预览气泡效果
   - 满意后点击右上角"保存样式"

3. **复制CSS代码**
   - 点击"复制CSS"按钮
   - 粘贴到其他应用中使用

### 高级功能

#### 渐变色气泡
1. 打开"启用渐变"开关
2. 选择"背景颜色"作为起始色
3. 选择"渐变终点色"作为结束色
4. 渐变方向固定为135度（左上→右下）

#### 导出/导入CSS
- **导出**：点击"复制CSS"，保存到文本文件
- **导入**：将CSS代码粘贴到右下角的代码框中

---

## 🔧 技术实现

### 数据结构
```typescript
// 保存到localStorage的键名
user_bubble_css        // 全局用户气泡CSS
ai_bubble_css          // 全局AI气泡CSS
user_bubble_css_{chatId}  // 单聊用户气泡CSS
ai_bubble_css_{chatId}    // 单聊AI气泡CSS
```

### CSS生成规则
```css
/* 用户消息气泡 */
.message-container.sent .message-bubble {
  background: [背景色或渐变] !important;
  color: [文字颜色] !important;
  border-radius: [圆角大小]px !important;
  padding: [内边距]px [内边距+4]px !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, [阴影强度]) !important;
}
```

### 样式应用机制
1. 编辑器修改参数 → 实时生成CSS
2. 点击保存 → 写入localStorage
3. 触发 `bubbleStyleUpdate` 事件
4. `useChatBubbles` Hook监听事件
5. 动态插入`<style>`标签到页面

---

## 🎨 预设样式详解

### 1. 默认样式
```css
用户气泡：深灰色背景 #1F2937 + 白色文字
AI气泡：白色背景 #FFFFFF + 深灰文字
圆角：18px
阴影：轻微（0.08）
```

### 2. 紫色渐变
```css
用户气泡：紫色渐变 #667eea → #764ba2
AI气泡：白色背景
圆角：20px
阴影：中等（0.3）
```

### 3. 水滴气泡
```css
特点：内外阴影组合 + 伪元素高光
技巧：使用::after添加顶部高光
效果：立体玻璃质感
```

### 4. 现代深色
```css
用户气泡：橙色 #FF6B35（强调色）
AI气泡：深色 #1A1A1A
圆角：20px
字重：500（Medium）
```

---

## 🚀 扩展计划

### 近期功能
- [ ] 单聊独立样式设置
- [ ] 更多预设样式（玻璃拟态、霓虹等）
- [ ] 动画效果设置（淡入、滑动等）
- [ ] 样式分享功能（导出/导入配置文件）

### 远期功能
- [ ] 云端样式库
- [ ] 社区样式市场
- [ ] AI自动配色建议
- [ ] 样式版本管理

---

## 💡 使用技巧

### 配色建议
1. **对比度**：确保文字和背景有足够对比度
2. **品牌色**：使用品牌主色作为用户气泡背景
3. **和谐搭配**：AI气泡使用低饱和度颜色

### 圆角选择
- 小圆角（8-12px）：专业、严肃
- 中圆角（16-20px）：友好、现代
- 大圆角（24-30px）：可爱、活泼

### 阴影强度
- 轻微（0.05-0.1）：扁平风格
- 中等（0.15-0.25）：立体感
- 强烈（0.3+）：悬浮效果

---

## 🐛 常见问题

### Q: 样式保存后不生效？
**A**: 检查是否刷新了聊天页面，或者手动触发 `window.dispatchEvent(new Event('bubbleStyleUpdate'))`

### Q: 渐变色显示不正确？
**A**: 确保"启用渐变"开关已打开，并且选择了两种不同的颜色

### Q: 如何恢复默认样式？
**A**: 点击"重置"按钮，或者清除localStorage中的气泡CSS键

### Q: CSS代码太长怎么办？
**A**: 使用预设样式，或者移除不必要的`!important`标记

---

## 📝 更新日志

### v1.0.0 (2025-11-20)
- ✨ 初始版本发布
- 🎨 4种预设样式
- 💾 可视化参数编辑
- 📋 CSS代码导出
- 🔄 实时预览功能

---

## 📄 许可证

MIT License - 完全开源，随意使用和修改

---

**享受创作！** 🎨✨
