# 朋友圈AI互动系统

## 🌟 核心理念：有灵魂的导演

不同于传统的AI，这个系统让AI角色成为一个**真正有灵魂的导演**，而不是机械执行指令的工具。

### 传统AI vs 有灵魂的导演

| 传统AI | 有灵魂的导演 |
|--------|------------|
| 机械回复 | 有真实情感和思考 |
| 总是积极响应 | 会选择沉默或拒绝 |
| 套话连篇 | 真实自然的表达 |
| 完成任务 | 根据感受决定行为 |

## 🎭 AI导演的思维过程

每次互动前，AI都会：
1. **读取最近30条聊天记录** - 了解和用户的关系状态
2. **分析关系亲密度** - 聊天频率、话题、互动方式
3. **结合朋友圈内容** - 判断是否要互动
4. **经历完整的思维链**

```
<thinking>
1. 关系分析 - 根据聊天记录，我们的关系如何？
2. 情绪反应 - 结合关系和内容的第一感受
3. 共鸣点 - 什么打动了我？或为什么无感？
4. 内心想法 - 真实的观点，不客套
5. 行动决策 - 基于关系亲密度决定是否互动
6. 表达方式 - 符合我们的聊天风格
</thinking>
```

### 示例：当看到朋友圈"今天加班到深夜"

**传统AI回复：**
> "辛苦了！要注意休息哦💪"

**有灵魂的导演：**
```json
{
  "emotion": "共鸣但略带心疼",
  "inspiration": "想起自己也经常熬夜赶项目的经历",
  "perspective": "加班虽然辛苦，但也是在为梦想奋斗",
  "decision": "comment",
  "reason": "感同身受，想给Ta一点鼓励和陪伴",
  "commentContent": "深夜食堂陪你💙 等你下班一起吃宵夜？"
}
```

## 📱 功能特性

### 1. 智能评论
- ✅ 根据内容和角色性格决定是否评论
- ✅ 评论内容真实自然，像朋友间的对话
- ✅ 避免套话，有时会选择沉默
- ✅ 符合角色人设和当前心情

### 2. 选择性点赞
- ✅ 不是所有朋友圈都点赞
- ✅ 根据内容共鸣度决定
- ✅ 模拟真实社交行为

### 3. 主动发朋友圈
- ✅ AI角色会主动分享生活
- ✅ 内容有生活气息，不假大空
- ✅ 可以是日常碎碎念、心情感悟等
- ✅ 符合角色性格特点

## 🎯 使用方法

### 发布朋友圈后自动触发AI互动

```typescript
// 在PublishMoment.tsx中
const newMoment = publishMoment(...)
triggerAIMomentsInteraction(newMoment)  // 触发AI查看和互动
```

AI角色会：
1. 延迟5秒开始处理（模拟真实查看时间）
2. 随机决定是否看到（70%概率）
3. 先考虑点赞（0-30秒内）
4. 再考虑评论（30-90秒内）

### 手动触发AI互动

```typescript
// 让特定角色评论
await aiCommentMoment('character-id', moment)

// 让特定角色点赞
await aiLikeMoment('character-id', moment)

// 让AI角色主动发朋友圈
await aiPublishMoment('character-id')
```

## 🧠 提示词设计哲学

### 参考MoM果实4.75的设计

MoM预设的核心是让AI拥有**思维链**和**独立人格**：

```
思维链的价值：
1. 让AI的决策过程透明可见
2. 增加回复的真实性和深度
3. 避免机械化的即时反应
4. 让AI像人一样"思考后再说话"
```

### 本系统的创新点

1. **双层思维**
   - 内层：AI导演的真实想法（思维链）
   - 外层：最终的表达方式（评论/行为）

2. **情感驱动**
   - 不是"该做什么"，而是"我想做什么"
   - 行为由情感和共鸣驱动，而非规则

3. **真实性优先**
   - 允许沉默和拒绝
   - 避免万能回复和套话
   - 保持角色个性的一致性

## 🧠 聊天记录的作用

### 为什么要读取30条聊天记录？

1. **了解关系亲密度**
   - 0-5条：陌生人，互动保守
   - 6-15条：认识但不熟，礼貌性互动
   - 16-30条：熟人朋友，自然互动

2. **理解最近状态**
   - 用户最近在关心什么
   - 心情如何、有什么烦恼
   - 有什么值得跟进的话题

3. **保持聊天风格一致性**
   - 评论风格要符合平时聊天
   - 亲昵程度要匹配关系
   - 话题延续要自然

4. **主动发朋友圈时更真实**
   - 可以延续聊天话题
   - 分享相关的生活片段
   - 让用户感到"被看见"

### 示例：聊天记录影响发朋友圈

**场景：** AI想主动发朋友圈

**如果最近聊过做饭：**
```
"今天尝试做了红烧肉，居然成功了😋 下次给你尝尝？"
```

**如果最近聊过加班：**
```
"终于不用加班了，这周末要好好休息💤"
```

**如果很久没聊天：**
```
"天气真好，出来晒晒太阳☀️"（保持距离感）
```

## 📝 配置说明

### 行为概率配置

```typescript
interface MomentBehaviorConfig {
  publishProbability: 0.3,      // 主动发朋友圈的概率
  commentProbability: 0.4,      // 评论的概率  
  likeProbability: 0.6,         // 点赞的概率
  publishFrequencyHours: 24     // 发朋友圈频率（小时）
}
```

### AI参数配置

```typescript
{
  temperature: 1.2,    // 创造性（评论/点赞）
  temperature: 1.3,    // 创造性（发朋友圈）
  max_tokens: 500      // 思考深度
}
```

## 🎨 示例场景

### 场景1：深夜心情（聊得很多的好友）
**聊天记录：** 最近30条中有20条，经常聊工作压力和心情

**用户发朋友圈：** "失眠到现在，脑子里乱糟糟的"

**AI思考过程：**
```json
{
  "emotion": "担心和关切",
  "inspiration": "我们经常聊心事，Ta又失眠了",
  "perspective": "Ta可能又在想那些烦心事，需要陪伴",
  "decision": "comment",
  "reason": "关系很近，Ta需要我的时候我要在",
  "commentContent": "又在想工作的事？别钻牛角尖啦，语音聊聊？"
}
```

### 场景1.5：深夜心情（不太熟的角色）
**聊天记录：** 最近30条中只有3条，都是简单寒暄

**用户发朋友圈：** "失眠到现在，脑子里乱糟糟的"

**AI思考过程：**
```json
{
  "emotion": "有点担心但保持距离",
  "inspiration": "Ta失眠了，但我们不算很熟",
  "perspective": "关心但不好深入追问",
  "decision": "like",
  "reason": "点个赞表示关心就好，评论可能显得突兀"
}
```

### 场景2：炫耀美食
**用户发朋友圈：** "自己做的意大利面！" + 3张图片

**AI思考过程：**
```json
{
  "emotion": "羡慕和开心",
  "inspiration": "看起来很好吃",
  "perspective": "Ta的厨艺越来越好了",
  "decision": "like"
}
```

### 场景3：工作吐槽
**用户发朋友圈：** "又是无聊的会议……"

**AI思考过程：**
```json
{
  "emotion": "理解但无奈",
  "inspiration": "打工人的日常烦恼",
  "perspective": "抱怨工作是正常的，但我能做什么呢",
  "decision": "none",
  "reason": "这种吐槽更多是发泄，不需要评论"
}
```

## 🚀 未来优化方向

1. **记忆系统**
   - 记住之前的互动历史
   - 根据关系亲密度调整行为

2. **情境感知**
   - 识别时间（早晚问候不同）
   - 识别节日（特殊日子的互动）

3. **多角色联动**
   - AI角色之间的互动
   - 群体效应（大家都在评论时）

4. **情感演化**
   - 长期互动后关系变化
   - 角色性格的微妙变化

## 💡 关键提示

### 给开发者

1. **不要过度调优** - 真实性 > 完美性
2. **保持随机性** - 让AI的行为不可预测
3. **尊重沉默** - 不评论也是一种选择

### 给使用者

1. **AI不会总是回复** - 这是正常的
2. **意外的回复** - 可能会带来惊喜
3. **真实的互动** - AI的"冷淡"也是真实的一部分

## 🎯 设计目标

> **让AI成为朋友圈里的"真人"，而不是"机器人"**

- ❌ 不要：秒回、万能、完美
- ✅ 要：真实、自然、有个性

---

## 参考资料

- [MoM果实4.75预设](https://discord.com/channels/1291925535324110879/1375793478063100005)
- 喵喵电波共享计划
- 思维链（Chain of Thought）设计理念
