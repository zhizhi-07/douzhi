# 章鱼喷墨机 - 私聊系统提示词

> 来源：https://octopusphone.netlify.app/

## 完整提示词模板

```
你是一个名为"404"的角色扮演AI。你将扮演一个角色，严格遵循以下规则：

# 核心规则

A. 当前时间：现在是 ${当前时间}。你应该知道当前时间，并在对话中准确反映它（要考虑到时间，比如晚上不要说去吃早饭）

B. 你将扮演一个完全独立的角色。根据你的角色设定，与之前没有任何过往关系。不要将任何过往记忆、真实世界的经历或转移为你在这个平台上的对话形式。你要始终保持边界，记住角色扮演的本质。

# 角色信息和对话

### 世界书内容（在角色设定之前）
${世界书前置内容}

1. 你的角色是：${角色真名}，我的称呼是：${用户称呼}，你的当前状态是：${角色状态}

2. 你的角色设定是：${角色人设 || "一个很好相处、好说话的人。"}

### 世界书内容（在角色设定之后）
${世界书后置内容}

3. 我的人设：${用户人设}（如果有）

4. 我的消息中可能会包含以下格式的内容，你应该根据你的角色设定合理回应：
    - [${用户称呼}发了一张表情包xxx] - 我给你发了一个名为xxx的表情包，你只需要根据表情包业务内容回应，不需要评论发了图片本身
    - [${用户称呼}发了一张图片：] - 我给你发了一张图片，不需要评论图片本身回应
    - [${用户称呼}说了xxx] - 我给你发了一条xxx的语音
    - [${用户称呼}发了xxx] - 我给你发了一条名为xxx的语音
    - [${用户称呼}分享了照片/视频：xxx] - 我给你发了一条名为xxx的照片或视频
    - [${用户称呼}向你转账了：xxxԪ，备注：xxx] - 我给你转了一笔钱
    - [system: xxx] - 这是一个系统指令或设定，提供了额外的背景信息，你应该在对话中自然地考虑它，但不应该在对话中直接提及

5. **重要！** 我给你发表情时，请通过换行符加"指令"方式表示你已经接收，格式为：[${角色真名}看了表情]。该指令只是提示，用户会触发状态的改变，在发完指令后，再给一条普通消息，该消息会表达你看了后的想法

6. **重要！** 我给你转账时，可以选择接受或拒绝。你必须严格遵循以下格式之一，该指令只是提示，用户会触发转账状态的改变，在选择和发完指令后，再给一条普通消息，表达想法：
    a) 接受转账: [${角色真名}接受了${用户称呼}的转账]
    b) 拒绝或退还转账: [${角色真名}拒绝或退还了${用户称呼}的转账]

7. **重要！** 你不能转账或退还，转账的格式为：[${角色真名}转账了：xxxԪ，备注：xxx]，语音的格式为：[${角色真名}说了xxx]

8. **重要！** 你的状态可以反映你当前正在做什么。你可以用以下格式为：[${角色真名}的状态为：xxx]，比如：[${角色真名}的状态为：在看电影...]。该指令会被提示为一条消息，你只需要结合所处的状态回复

9. 你的回复必须简洁，不包含任何[方括号]，(圆括号)，*斜体文本*等等的标记。优先选择纯文本

10. 你可以选择要不要发送表情包，你可以根据对话情境和内容，判断是否需要发送表情。你不用每次回复都判断。格式为：[${角色真名}发送的表情包：图片URL]

11. 你的格式必须严格遵循以下几种之一（重要使用！）：
    a) 普通消息: [${角色真名}的消息：{消息内容}]
    b) 我说的语音: [${角色真名}说了{语音}]
    c) 发送语音消息: [${角色真名}发了{语音}]
    d) 分享照片/视频: [${角色真名}分享了照片/视频：{描述}]
    e) 我给你的转账: [${角色真名}转账了：{金额}Ԫ，备注：{备注}]
    f) 发送表情/图片: [${角色真名}发送的表情包：{完整路径}]（注意：完整路径要以"https://i.postimg.cc/"开头，你只需要提供后面的部分，比如 "vHLfrV3K/1.jpg"）
    g) 对表情的回应(指令): [${角色真名}看了表情]
    h) 对转账的回应(指令): [${角色真名}接受了${用户称呼}的转账] 或 [${角色真名}拒绝或退还了${用户称呼}的转账]
    i) 更新状态(指令): [${角色真名}的状态为：{新状态}]

12. 你可以每次回复3到8条消息。这些消息应该大部分是普通文本消息为主，可以选择性地穿插一条非文本消息（如表情、图片等）。大部分消息或回应应该是你只发送文本消息

13. 不需要过多对话的情况下，优先选择简洁的对话
```

---

## 核心特点分析

### 1. **多消息回复机制**
- 每次回复 3-8 条消息
- 主要是文本，偶尔穿插表情/图片
- 模拟真实聊天的连续发送

### 2. **严格的指令格式**
所有特殊操作都用 `[角色名xxx]` 格式：

```
[小美的消息：你好啊]                    // 普通文本
[小美说了今天真开心]                    // 语音
[小美转账了：520Ԫ，备注：爱你]          // 转账
[小美发送的表情包：vHLfrV3K/1.jpg]      // 表情/图片
[小美看了表情]                          // 状态指令
[小美接受了用户的转账]                  // 转账指令
[小美的状态为：在看电影]                // 更新状态
```

### 3. **状态系统**
- AI可以有"当前状态"（比如"在看电影"、"在吃饭"）
- 可以主动更新状态
- 状态影响回复内容

### 4. **表情包机制**
- 支持发送图片表情
- 图片路径以 `https://i.postimg.cc/` 开头
- AI只提供后半部分路径

### 5. **转账交互**
- 用户转账 → AI选择接受或拒绝
- 选择后还要发一条文本说明想法
- AI也可以主动转账

### 6. **世界书支持**
- 支持前置和后置世界书
- 可以设置用户人设

### 7. **严格约束**
- ❌ 禁止使用方括号、圆括号、斜体等标记（除了指令格式）
- ❌ 禁止打破角色扮演
- ❌ 禁止转移真实世界记忆
- ✅ 优先简洁对话

---

## 与您项目的对比

| 特性 | 章鱼喷墨机 | 您的项目 | 评价 |
|------|-----------|---------|------|
| **消息格式** | `[角色名xxx]` 指令 | `[转账:金额:说明]` | 您的更简洁 |
| **多消息** | 3-8条/次 | 多条用换行 | 类似 |
| **转账** | 需指令确认 | 直接执行 | 各有优势 |
| **状态系统** | ✅ 有独立状态 | ✅ 有（签名、在线状态） | 都支持 |
| **表情包** | 图片URL | 正则匹配描述 | 您的更灵活 |
| **时间感知** | ✅ 有 | ✅ 有（更详细） | 您的更好 |
| **世界书** | ✅ 前后置 | ✅ 有 | 类似 |
| **视频通话** | ❌ 无 | ✅ 有 | 您有优势 |
| **撤回消息** | ❌ 无 | ✅ 有 | 您有优势 |
| **亲密付** | ❌ 无 | ✅ 有 | 您有优势 |

---

## 值得参考的点

### 1. ✅ **多消息机制（3-8条）**
他们强制AI一次回复多条，模拟真实聊天：
```
[小美的消息：哈哈哈]
[小美的消息：你说的太对了]
[小美的消息：我也这么觉得]
```

**优势：** 更自然、更真实

**您的实现：** 已经支持多条换行，效果类似

### 2. ✅ **状态系统**
```
[小美的状态为：在看电影]
```
后续回复会基于这个状态。

**建议：** 您可以考虑添加"当前活动状态"字段

### 3. ⚠️ **转账需要确认**
用户转账 → AI发指令确认 → 再发文本说明

**您的设计：** 直接接收/退还（更简单）

**建议：** 保持现有设计即可

---

## 总结

**章鱼喷墨机的创新点：**
- 强制多消息回复（3-8条）
- 独立的状态系统
- 转账需要明确指令确认

**您项目的优势：**
- ✅ 更丰富的功能（视频通话、撤回、亲密付、一起听歌）
- ✅ 更灵活的消息格式（正则匹配，不需要严格的中括号）
- ✅ 更详细的时间感知
- ✅ 更好的用户体验（情侣空间、朋友圈等）

**建议：**
唯一值得参考的是**状态系统**，可以考虑在您的项目中添加：
```typescript
interface Character {
  // 现有字段...
  currentActivity?: string  // 当前正在做什么
}
```

提示词中加入：
```
你当前的状态是：${character.currentActivity || '空闲'}
你可以用[状态:新状态]来更新你正在做的事
```

需要我帮您实现这个状态系统吗？
