# ğŸ” è°ƒè¯•æ­¥éª¤ - æ‰¾å‡ºå¡æ­»åŸå› 

## ç´§æ€¥è°ƒè¯•æ­¥éª¤

### æ­¥éª¤1ï¼šæ‰“å¼€å¼€å‘è€…å·¥å…·

```
æŒ‰ F12 (Windows)
æˆ– Cmd + Option + I (Mac)
```

### æ­¥éª¤2ï¼šæ¸…é™¤æ‰€æœ‰ç¼“å­˜

```
1. æŒ‰ Ctrl + Shift + Delete
2. å‹¾é€‰æ‰€æœ‰é€‰é¡¹
3. ç‚¹å‡»æ¸…é™¤
```

### æ­¥éª¤3ï¼šå¼ºåˆ¶åˆ·æ–°é¡µé¢

```
æŒ‰ Ctrl + Shift + R (Windows)
æˆ– Cmd + Shift + R (Mac)
```

### æ­¥éª¤4ï¼šæŸ¥çœ‹ Console æ—¥å¿—

**æ­£å¸¸æƒ…å†µåº”è¯¥çœ‹åˆ°ï¼š**
```
ğŸ¬ [ChatDetail] ç»„ä»¶æ¸²æŸ“ xxxxx
ğŸ“ [ChatDetail] Step 1: åˆå§‹åŒ–çŠ¶æ€ {id: "zhizhi-001"}
ğŸ“ [ChatDetail] Step 2: chatState å®Œæˆ {messagesCount: 10}
```

**å¦‚æœå¡ä½äº†ï¼Œä¼šçœ‹åˆ°ï¼š**
```
ğŸ¬ [ChatDetail] ç»„ä»¶æ¸²æŸ“ xxxxx
ğŸ¬ [ChatDetail] ç»„ä»¶æ¸²æŸ“ xxxxx  â† é‡å¤å¤šæ¬¡
ğŸ¬ [ChatDetail] ç»„ä»¶æ¸²æŸ“ xxxxx
...
```

---

## å¯èƒ½çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### é—®é¢˜1ï¼šçœ‹åˆ°å¤§é‡é‡å¤çš„"ğŸ¬ ç»„ä»¶æ¸²æŸ“"

**åŸå› ï¼š** æ— é™é‡æ¸²æŸ“

**è§£å†³æ–¹æ¡ˆï¼š**
1. ç«‹å³å…³é—­æ ‡ç­¾é¡µ
2. æ‰“å¼€ `src/pages/ChatDetail.tsx`
3. æ‰¾åˆ°æ‰€æœ‰ `useEffect` 
4. åˆ é™¤æ‰€æœ‰ä¾èµ–é¡¹ä¸­çš„å¯¹è±¡

**å¿«é€Ÿä¿®å¤ï¼š**
```tsx
// æ‰¾åˆ°è¿™äº›ä»£ç å¹¶ä¿®æ”¹
useEffect(() => {
  // ...
}, [chatState.messages.length]) // âœ… åªç”¨åŸºæœ¬ç±»å‹

// ä¸è¦è¿™æ ·
useEffect(() => {
  // ...
}, [chatAI, messages]) // âŒ å¯¹è±¡ä¼šå¯¼è‡´æ— é™å¾ªç¯
```

---

### é—®é¢˜2ï¼šå¡åœ¨ Step 1

**åŸå› ï¼š** `useChatState` åˆå§‹åŒ–å¤±è´¥

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ£€æŸ¥ localStorage æ˜¯å¦æŸå
2. æ¸…é™¤ localStorage

**æ¸…é™¤æ–¹æ³•ï¼š**
```javascript
// åœ¨ Console è¿è¡Œï¼š
localStorage.clear()
location.reload()
```

---

### é—®é¢˜3ï¼šå¡åœ¨ Step 2

**åŸå› ï¼š** æ¶ˆæ¯æ•°æ®å¤ªå¤§

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ¸…é™¤èŠå¤©è®°å½•
2. é™åˆ¶æ¶ˆæ¯æ•°é‡

**æ¸…é™¤æ–¹æ³•ï¼š**
```javascript
// åœ¨ Console è¿è¡Œï¼š
Object.keys(localStorage).forEach(key => {
  if (key.startsWith('chat_messages_')) {
    localStorage.removeItem(key)
  }
})
location.reload()
```

---

### é—®é¢˜4ï¼šç›´æ¥é»‘å±æ²¡æœ‰ä»»ä½•æ—¥å¿—

**åŸå› ï¼š** JavaScript é”™è¯¯

**è§£å†³æ–¹æ¡ˆï¼š**
1. æŸ¥çœ‹ Console çš„ Errors æ ‡ç­¾
2. æŸ¥æ‰¾çº¢è‰²é”™è¯¯ä¿¡æ¯
3. æˆªå›¾å‘ç»™æˆ‘

---

## ä¸´æ—¶ç´§æ€¥æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šä½¿ç”¨ç®€åŒ–ç‰ˆé¡µé¢

**æ–‡ä»¶ï¼š** `ChatDetail.safe.tsx` ï¼ˆå·²åˆ›å»ºï¼‰

**ä½¿ç”¨æ–¹æ³•ï¼š**
1. æ‰“å¼€ `src/App.tsx`
2. æ‰¾åˆ°å¯¼å…¥ ChatDetail çš„åœ°æ–¹
3. æ”¹ä¸ºå¯¼å…¥ ChatDetail.safe

```tsx
// ä¿®æ”¹å‰
import ChatDetail from './pages/ChatDetail'

// ä¿®æ”¹å
import ChatDetail from './pages/ChatDetail/ChatDetail.safe'
```

---

### æ–¹æ¡ˆ2ï¼šå›æ»šåˆ°æ—§ç‰ˆæœ¬

```bash
# æ‰¾åˆ°ä¹‹å‰çš„æäº¤
git log --oneline

# å›æ»šåˆ°ä¸Šä¸€ä¸ªæ­£å¸¸ç‰ˆæœ¬
git checkout <commit-hash>
```

---

### æ–¹æ¡ˆ3ï¼šç¦ç”¨æ‰€æœ‰åŠ¨ç”»

**æ–‡ä»¶ï¼š** `src/styles/animations.css`

**åœ¨æ–‡ä»¶å¼€å¤´æ·»åŠ ï¼š**
```css
* {
  animation: none !important;
  transition: none !important;
}
```

---

## å¸¸è§é”™è¯¯ä¿¡æ¯åŠè§£å†³

### é”™è¯¯1: "Maximum update depth exceeded"

**æ„æ€ï¼š** æ— é™é‡æ¸²æŸ“

**è§£å†³ï¼š**
```tsx
// æ£€æŸ¥æ‰€æœ‰ setState è°ƒç”¨
// ä¸è¦åœ¨ render ä¸­ç›´æ¥è°ƒç”¨ setState
```

---

### é”™è¯¯2: "Cannot read property of undefined"

**æ„æ€ï¼š** æ•°æ®æœªåŠ è½½

**è§£å†³ï¼š**
```tsx
// æ·»åŠ ç©ºå€¼æ£€æŸ¥
if (!character) return <Loading />
```

---

### é”™è¯¯3: "ResizeObserver loop limit exceeded"

**æ„æ€ï¼š** æµè§ˆå™¨è­¦å‘Šï¼ˆé€šå¸¸å¯ä»¥å¿½ç•¥ï¼‰

**è§£å†³ï¼š** æ— éœ€å¤„ç†ï¼Œè¿™æ˜¯æµè§ˆå™¨çš„è­¦å‘Š

---

## æ€§èƒ½ä¼˜åŒ–æ£€æŸ¥æ¸…å•

å¦‚æœé¡µé¢èƒ½æ‰“å¼€ä½†å¾ˆå¡ï¼š

- [ ] æ¶ˆæ¯æ•°é‡æ˜¯å¦è¿‡å¤šï¼ˆ>1000æ¡ï¼‰
- [ ] æ˜¯å¦æœ‰å¤§å›¾ç‰‡æœªä¼˜åŒ–
- [ ] æ˜¯å¦æœ‰å¤§é‡çš„ re-render
- [ ] æ˜¯å¦æœ‰å†…å­˜æ³„æ¼

**ä¼˜åŒ–æ–¹æ³•ï¼š**
```tsx
// 1. é™åˆ¶æ¶ˆæ¯æ•°é‡
const recentMessages = messages.slice(-100)

// 2. ä½¿ç”¨ React.memo
const MessageItem = React.memo(({ message }) => {
  return <div>{message.content}</div>
})

// 3. è™šæ‹Ÿæ»šåŠ¨
import { FixedSizeList } from 'react-window'
```

---

## è”ç³»æ”¯æŒ

å¦‚æœä»¥ä¸Šæ–¹æ³•éƒ½æ— æ•ˆï¼š

1. æˆªå›¾ Console æ‰€æœ‰é”™è¯¯
2. æˆªå›¾ Network æ ‡ç­¾
3. å‘Šè¯‰æˆ‘ï¼š
   - å¡åœ¨å“ªä¸ªæ­¥éª¤
   - æœ‰ä»€ä¹ˆé”™è¯¯ä¿¡æ¯
   - æ“ä½œäº†ä»€ä¹ˆå¯¼è‡´å¡æ­»

---

**ç°åœ¨ç«‹å³æ‰§è¡Œæ­¥éª¤1-4ï¼Œç„¶åå‘Šè¯‰æˆ‘çœ‹åˆ°äº†ä»€ä¹ˆï¼**
