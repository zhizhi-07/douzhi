# è®°å¿†æ€»ç»“åŠŸèƒ½æµ‹è¯•æŒ‡å—

## é—®é¢˜ï¼šæ€»ç»“ä¸€ç›´æ˜¾ç¤º"æ€»ç»“ä¸­..."

### å¯èƒ½åŸå› ï¼š
1. âŒ APIæœªé…ç½®æˆ–é…ç½®é”™è¯¯
2. âŒ APIè°ƒç”¨è¶…æ—¶ï¼ˆ120ç§’ï¼‰
3. âŒ ç½‘ç»œè¿æ¥é—®é¢˜
4. âŒ APIè¿”å›é”™è¯¯ä½†æœªæ­£ç¡®å¤„ç†

---

## è¯Šæ–­æ­¥éª¤

### 1. æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°
æŒ‰ `F12` æˆ–å³é”® â†’ æ£€æŸ¥ â†’ Console

### 2. ç‚¹å‡»"ç”Ÿæˆæ€»ç»“"æŒ‰é’®

### 3. è§‚å¯Ÿæ§åˆ¶å°è¾“å‡º

#### âœ… æ­£å¸¸æµç¨‹åº”è¯¥çœ‹åˆ°ï¼š
```
ğŸ“ å¼€å§‹ç”Ÿæˆæ€»ç»“ï¼Œæ¶ˆæ¯æ•°é‡: XX
ğŸ“ å¯¹è¯æ–‡æœ¬é•¿åº¦: XXX å­—ç¬¦
ğŸ“ è°ƒç”¨AIç”Ÿæˆæ€»ç»“...
ğŸ¤– generateAISummary å¼€å§‹
  - å†…å®¹é•¿åº¦: XXX å­—ç¬¦
  - æœ€å¤§é•¿åº¦: 200
  - é£æ ¼: brief
ğŸ¤– è°ƒç”¨ callApiWithFallback...
ğŸ“¡ callApiWithFallback å¼€å§‹
  - preferSubApi: true
  - maxTokens: 400
  - temperature: 0.5
```

**ç„¶åä¼šå‡ºç°ä»¥ä¸‹ä»»ä¸€æƒ…å†µï¼š**

#### æƒ…å†µAï¼šæ‰¾åˆ°å‰¯APIé…ç½®
```
âœ… æ‰¾åˆ°å‰¯APIé…ç½®
  - baseUrl: https://xxx
  - model: xxx
ğŸš€ å¼€å§‹è°ƒç”¨ callAIApi...
âœ… APIè°ƒç”¨æˆåŠŸ
âœ… AIæ€»ç»“ç”ŸæˆæˆåŠŸï¼Œé•¿åº¦: XXX
ğŸ“ æ€»ç»“æµç¨‹ç»“æŸï¼Œæ‰“å¼€ä¿å­˜å¯¹è¯æ¡†
```

#### æƒ…å†µBï¼šæœªæ‰¾åˆ°å‰¯APIï¼Œä½¿ç”¨ä¸»API
```
âš ï¸ æœªæ‰¾åˆ°å‰¯APIé…ç½®ï¼Œå°†ä½¿ç”¨ä¸»API
âœ… ä½¿ç”¨ä¸»APIè¿›è¡Œè°ƒç”¨
  - baseUrl: https://xxx
  - model: xxx
ğŸš€ å¼€å§‹è°ƒç”¨ callAIApi...
âœ… APIè°ƒç”¨æˆåŠŸ
âœ… AIæ€»ç»“ç”ŸæˆæˆåŠŸï¼Œé•¿åº¦: XXX
ğŸ“ æ€»ç»“æµç¨‹ç»“æŸï¼Œæ‰“å¼€ä¿å­˜å¯¹è¯æ¡†
```

#### æƒ…å†µCï¼šAPIæœªé…ç½®ï¼ˆä¼šç«‹å³å¤±è´¥ï¼‰
```
âŒ æœªé…ç½®APIï¼ˆä¸»APIå’Œå‰¯APIéƒ½æœªè®¾ç½®ï¼‰
âŒ AIæ€»ç»“å¤±è´¥: Error: æœªé…ç½®APIï¼ˆä¸»APIå’Œå‰¯APIéƒ½æœªè®¾ç½®ï¼‰
[å¼¹çª—] AIæ€»ç»“å¤±è´¥: æœªé…ç½®APIï¼ˆä¸»APIå’Œå‰¯APIéƒ½æœªè®¾ç½®ï¼‰

å°†ä½¿ç”¨ç®€å•æ€»ç»“
ğŸ“ ä½¿ç”¨å¤‡ç”¨æ€»ç»“: è¿™æ®µå¯¹è¯åŒ…å« XX æ¡æ¶ˆæ¯...
ğŸ“ æ€»ç»“æµç¨‹ç»“æŸï¼Œæ‰“å¼€ä¿å­˜å¯¹è¯æ¡†
```

#### æƒ…å†µDï¼šAPIè°ƒç”¨è¶…æ—¶æˆ–å¤±è´¥
```
ğŸš€ å¼€å§‹è°ƒç”¨ callAIApi...
[ç­‰å¾…å¾ˆä¹…...]
âŒ APIè°ƒç”¨å¤±è´¥: [é”™è¯¯ä¿¡æ¯]
âŒ generateAISummary å¤±è´¥: [é”™è¯¯ä¿¡æ¯]
[å¼¹çª—] AIæ€»ç»“å¤±è´¥: [é”™è¯¯ä¿¡æ¯]

å°†ä½¿ç”¨ç®€å•æ€»ç»“
ğŸ“ ä½¿ç”¨å¤‡ç”¨æ€»ç»“: è¿™æ®µå¯¹è¯åŒ…å« XX æ¡æ¶ˆæ¯...
ğŸ“ æ€»ç»“æµç¨‹ç»“æŸï¼Œæ‰“å¼€ä¿å­˜å¯¹è¯æ¡†
```

---

## è§£å†³æ–¹æ¡ˆ

### å¦‚æœä¸€ç›´å¡åœ¨"æ€»ç»“ä¸­..."

#### æ–¹æ¡ˆ1ï¼šæ£€æŸ¥APIé…ç½®
1. è¿›å…¥ **ç³»ç»Ÿè®¾ç½®** â†’ **APIé…ç½®**
2. ç¡®è®¤ä¸»APIå·²æ­£ç¡®é…ç½®ï¼š
   - APIåœ°å€
   - APIå¯†é’¥
   - æ¨¡å‹åç§°
3. ç‚¹å‡»"æµ‹è¯•è¿æ¥"ç¡®è®¤å¯ç”¨

#### æ–¹æ¡ˆ2ï¼šé…ç½®å‰¯APIï¼ˆæ¨èï¼‰
1. åœ¨APIé…ç½®é¡µé¢æ·»åŠ  **å‰¯APIè®¾ç½®**
2. ä½¿ç”¨æ›´å¿«/æ›´ä¾¿å®œçš„æ¨¡å‹è¿›è¡Œæ€»ç»“
3. ä¾‹å¦‚ï¼šä½¿ç”¨ `gpt-3.5-turbo` æˆ– `gemini-1.5-flash`

#### æ–¹æ¡ˆ3ï¼šæ£€æŸ¥ç½‘ç»œ
1. ç¡®è®¤èƒ½è®¿é—®APIæœåŠ¡å™¨
2. æ£€æŸ¥é˜²ç«å¢™/ä»£ç†è®¾ç½®
3. å°è¯•åœ¨æµè§ˆå™¨ä¸­è®¿é—®APIåœ°å€

#### æ–¹æ¡ˆ4ï¼šä½¿ç”¨å¤‡ç”¨æ€»ç»“
å¦‚æœAPIæ— æ³•ä½¿ç”¨ï¼Œç³»ç»Ÿä¼šåœ¨2åˆ†é’Ÿå**è‡ªåŠ¨å¤±è´¥**å¹¶ï¼š
- å¼¹å‡ºé”™è¯¯æç¤º
- ä½¿ç”¨ç®€å•æ–‡æœ¬æ€»ç»“
- ä»ç„¶å¯ä»¥ä¿å­˜è®°å¿†

---

## å¿«é€Ÿæµ‹è¯•è„šæœ¬

åœ¨æ§åˆ¶å°è¿è¡Œä»¥ä¸‹ä»£ç æµ‹è¯•APIé…ç½®ï¼š

```javascript
// æµ‹è¯•ä¸»APIé…ç½®
const testApi = () => {
  const apiSettings = localStorage.getItem('api_settings')
  if (apiSettings) {
    const api = JSON.parse(apiSettings)
    console.log('âœ… ä¸»APIé…ç½®:')
    console.log('  - baseUrl:', api.baseUrl)
    console.log('  - model:', api.model)
    console.log('  - apiKey:', api.apiKey ? 'å·²è®¾ç½®' : 'âŒ æœªè®¾ç½®')
  } else {
    console.log('âŒ ä¸»APIæœªé…ç½®')
  }
  
  const subApiSettings = localStorage.getItem('SUB_API_SETTINGS')
  if (subApiSettings) {
    const subApi = JSON.parse(subApiSettings)
    console.log('âœ… å‰¯APIé…ç½®:')
    console.log('  - baseUrl:', subApi.baseUrl)
    console.log('  - model:', subApi.model)
    console.log('  - apiKey:', subApi.apiKey ? 'å·²è®¾ç½®' : 'âŒ æœªè®¾ç½®')
  } else {
    console.log('âš ï¸ å‰¯APIæœªé…ç½®ï¼ˆå¯é€‰ï¼‰')
  }
}

testApi()
```

---

## å¸¸è§é”™è¯¯åŠè§£å†³

| é”™è¯¯ä¿¡æ¯ | åŸå›  | è§£å†³æ–¹æ³• |
|---------|------|---------|
| `æœªé…ç½®API` | APIæœªè®¾ç½® | å‰å¾€ç³»ç»Ÿè®¾ç½®é…ç½®API |
| `Network request failed` | ç½‘ç»œé—®é¢˜ | æ£€æŸ¥ç½‘ç»œè¿æ¥ |
| `API key invalid` | APIå¯†é’¥é”™è¯¯ | æ›´æ–°æ­£ç¡®çš„APIå¯†é’¥ |
| `timeout` | è¯·æ±‚è¶…æ—¶ | æ£€æŸ¥ç½‘ç»œæˆ–æ¢å¿«é€Ÿæ¨¡å‹ |
| `quota exceeded` | é…é¢ç”¨å®Œ | æ›´æ¢APIæˆ–å……å€¼ |

---

## æ›´æ–°æ—¥å¿—

### 2024-11-20
- âœ… æ·»åŠ è¯¦ç»†çš„è°ƒè¯•æ—¥å¿—
- âœ… æ”¹è¿›é”™è¯¯æç¤ºï¼ˆå¼¹çª—æ˜¾ç¤ºå…·ä½“é”™è¯¯ï¼‰
- âœ… å¤±è´¥æ—¶è‡ªåŠ¨ä½¿ç”¨ç®€å•æ€»ç»“
- âœ… æ”¯æŒå‰¯APIé™çº§åˆ°ä¸»API
- âœ… æ‰€æœ‰æƒ…å†µéƒ½ä¼šæ­£ç¡®å…³é—­"æ€»ç»“ä¸­"çŠ¶æ€

---

## åé¦ˆ

å¦‚æœä»ç„¶å¡ä½ï¼Œè¯·æä¾›ï¼š
1. æ§åˆ¶å°å®Œæ•´è¾“å‡º
2. APIé…ç½®ï¼ˆéšè—å¯†é’¥ï¼‰
3. ç½‘ç»œç¯å¢ƒä¿¡æ¯
