# ä½ ç”»æˆ‘çŒœæ¸¸æˆé‡æ„ - è®¾è®¡æ–‡æ¡£

## æ¦‚è¿°

é‡æ„ç°æœ‰çš„ä½ ç”»æˆ‘çŒœæ¸¸æˆç³»ç»Ÿï¼Œç®€åŒ–æ¸¸æˆæµç¨‹ï¼Œå®ç°è‡ªåŠ¨ç­”æ¡ˆåˆ¤æ–­ï¼Œæä¾›æ›´æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚æ ¸å¿ƒæ”¹è¿›æ˜¯ç§»é™¤æ‰‹åŠ¨ç¡®è®¤æœºåˆ¶ï¼Œè®©ç³»ç»Ÿè‡ªåŠ¨æ£€æµ‹AIå›å¤ä¸­çš„ç­”æ¡ˆå¹¶åˆ¤æ–­å¯¹é”™ã€‚

## æ¶æ„

### ç³»ç»Ÿç»„ä»¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ChatDetail é¡µé¢                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚           useTacitGame Hook (çŠ¶æ€ç®¡ç†)            â”‚  â”‚
â”‚  â”‚  - æ¸¸æˆçŠ¶æ€                                        â”‚  â”‚
â”‚  â”‚  - é¢˜ç›®ç®¡ç†                                        â”‚  â”‚
â”‚  â”‚  - ç­”æ¡ˆåˆ¤æ–­é€»è¾‘                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ TacitGame    â”‚  â”‚ TacitTopic   â”‚  â”‚ TacitDraw    â”‚  â”‚
â”‚  â”‚ Select       â”‚  â”‚ Card         â”‚  â”‚ Panel        â”‚  â”‚
â”‚  â”‚ (é€‰æ‹©ç•Œé¢)    â”‚  â”‚ (é¢˜ç›®å¡ç‰‡)    â”‚  â”‚ (ç”»æ¿)        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚         Answer Matcher (ç­”æ¡ˆåŒ¹é…å™¨)               â”‚   â”‚
â”‚  â”‚  - æ¨¡ç³ŠåŒ¹é…                                       â”‚   â”‚
â”‚  â”‚  - åŒä¹‰è¯æ”¯æŒ                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµ

```
ç”¨æˆ·é€‰æ‹©æ¸¸æˆ â†’ ç”Ÿæˆé¢˜ç›® â†’ ç”¨æˆ·åˆ›ä½œ â†’ å‘é€æ¶ˆæ¯ â†’ è§¦å‘AI
                                                    â†“
æ¸¸æˆç»“æŸ â† å‘é€æˆåŠŸæ¶ˆæ¯ â† ç­”æ¡ˆåŒ¹é… â† AIå›å¤
         â†“ (çŒœé”™)
    ä¿æŒæ¸¸æˆçŠ¶æ€ï¼Œå…è®¸ç»§ç»­å°è¯•
```

## ç»„ä»¶å’Œæ¥å£

### 1. useTacitGame Hook

**èŒè´£**: ç®¡ç†æ¸¸æˆçŠ¶æ€å’Œé€»è¾‘

**çŠ¶æ€**:
```typescript
interface TacitGameState {
  showGameSelect: boolean      // æ˜¯å¦æ˜¾ç¤ºæ¸¸æˆé€‰æ‹©ç•Œé¢
  gameType: 'draw' | 'act' | null  // å½“å‰æ¸¸æˆç±»å‹
  topic: string                // å½“å‰é¢˜ç›®
  showPanel: boolean           // æ˜¯å¦æ˜¾ç¤ºç”»æ¿/è¾“å…¥é¢æ¿
  canvasDataRef: React.MutableRefObject<string | null>  // ç”»å¸ƒæ•°æ®
  descriptionRef: React.MutableRefObject<string>  // æè¿°æ–‡æœ¬
}
```

**æ ¸å¿ƒæ–¹æ³•**:
```typescript
interface TacitGameActions {
  // æ¸¸æˆæ§åˆ¶
  openGameSelect: () => void
  closeGameSelect: () => void
  startGame: (type: 'draw' | 'act') => void
  endGame: () => void
  changeTopic: () => void
  
  // é¢æ¿æ§åˆ¶
  openPanel: () => void
  closePanel: () => void
  
  // å‘é€å†…å®¹
  sendDrawing: (imageData: string) => void
  sendDescription: (description: string) => void
  
  // ç­”æ¡ˆåˆ¤æ–­ï¼ˆæ–°å¢ï¼‰
  checkAnswer: (aiResponse: string) => boolean
}
```

### 2. Answer Matcher æ¨¡å—

**èŒè´£**: åˆ¤æ–­AIå›å¤æ˜¯å¦åŒ…å«æ­£ç¡®ç­”æ¡ˆ

**æ¥å£**:
```typescript
interface AnswerMatcher {
  /**
   * æ£€æŸ¥AIå›å¤æ˜¯å¦åŒ…å«æ­£ç¡®ç­”æ¡ˆ
   * @param aiResponse AIçš„å›å¤æ–‡æœ¬
   * @param correctAnswer æ­£ç¡®ç­”æ¡ˆ
   * @returns æ˜¯å¦åŒ¹é…
   */
  isAnswerCorrect(aiResponse: string, correctAnswer: string): boolean
  
  /**
   * æ ‡å‡†åŒ–æ–‡æœ¬ï¼ˆå»é™¤æ ‡ç‚¹ã€ç©ºæ ¼ã€è½¬å°å†™ï¼‰
   * @param text åŸå§‹æ–‡æœ¬
   * @returns æ ‡å‡†åŒ–åçš„æ–‡æœ¬
   */
  normalizeText(text: string): string
  
  /**
   * è·å–åŒä¹‰è¯åˆ—è¡¨
   * @param word åŸè¯
   * @returns åŒä¹‰è¯æ•°ç»„
   */
  getSynonyms(word: string): string[]
}
```

**åŒä¹‰è¯æ˜ å°„**:
```typescript
const SYNONYMS_MAP: Record<string, string[]> = {
  'æ±½è½¦': ['è½¦', 'å°æ±½è½¦', 'è½¿è½¦'],
  'å¤ªé˜³': ['æ—¥', 'å¤ªé˜³å…¬å…¬'],
  'æœˆäº®': ['æœˆ', 'æœˆçƒ'],
  'æˆ¿å­': ['æˆ¿', 'å±‹å­', 'æˆ¿å±‹'],
  'è·‘æ­¥': ['è·‘', 'å¥”è·‘'],
  'åšé¥­': ['çƒ¹é¥ª', 'ç…®é¥­', 'ç‚’èœ'],
  // ... æ›´å¤šåŒä¹‰è¯
}
```

### 3. TacitTopicCard ç»„ä»¶

**èŒè´£**: æ˜¾ç¤ºå½“å‰é¢˜ç›®å’Œæ¸¸æˆæ§åˆ¶æŒ‰é’®

**Props**:
```typescript
interface TacitTopicCardProps {
  topic: string
  gameType: 'draw' | 'act'
  onChangeTopic: () => void
  onClose: () => void
  onOpenPanel: () => void
  isPanelOpen: boolean
  isAiThinking?: boolean  // æ–°å¢ï¼šAIæ˜¯å¦æ­£åœ¨æ€è€ƒ
}
```

**UIå˜åŒ–**:
- ç§»é™¤"çŒœå¯¹äº†"æŒ‰é’®
- æ·»åŠ "AIæ­£åœ¨çŒœæµ‹..."çŠ¶æ€æç¤º
- ç®€åŒ–æŒ‰é’®å¸ƒå±€

### 4. TacitDrawPanel ç»„ä»¶

**èŒè´£**: æä¾›ç»˜ç”»ç•Œé¢

**Props**:
```typescript
interface TacitDrawPanelProps {
  onSendImage: (imageData: string) => void
  onClose: () => void
  canvasDataRef: React.MutableRefObject<string | null>
}
```

**åŠŸèƒ½**:
- ç”»å¸ƒç»˜åˆ¶
- æ¸…ç©ºç”»å¸ƒ
- ä¿å­˜/æ¢å¤ç”»å¸ƒçŠ¶æ€
- å‘é€ç”»ä½œ

### 5. TacitActPanel ç»„ä»¶

**èŒè´£**: æä¾›æ–‡å­—æè¿°ç•Œé¢

**Props**:
```typescript
interface TacitActPanelProps {
  onSendDescription: (description: string) => void
  onClose: () => void
  descriptionRef: React.MutableRefObject<string>
}
```

## æ•°æ®æ¨¡å‹

### æ¸¸æˆæ¶ˆæ¯æ ¼å¼

**ä½ ç”»æˆ‘çŒœæ¶ˆæ¯**:
```typescript
{
  id: number
  type: 'sent'
  messageType: 'photo'
  content: '[ä½ ç”»æˆ‘çŒœ]'  // ç”¨æˆ·å¯è§ï¼Œä¸æ˜¾ç¤ºç­”æ¡ˆ
  aiReadableContent: 'è¿™æ˜¯ä¸€å¹…ç”»ï¼ŒçŒœçŒœç”»çš„æ˜¯ä»€ä¹ˆï¼Ÿ'  // AIå¯è§
  photoBase64: string
  photoDescription: 'ä½ ç”»æˆ‘çŒœæ¸¸æˆ'
  time: string
  timestamp: number
}
```

**ä½ æ¼”æˆ‘çŒœæ¶ˆæ¯**:
```typescript
{
  id: number
  type: 'sent'
  messageType: 'text'
  content: string  // ç”¨æˆ·çš„æè¿°
  aiReadableContent: `æ ¹æ®è¿™ä¸ªæè¿°çŒœçŒœæ˜¯ä»€ä¹ˆåŠ¨ä½œï¼š${description}`
  time: string
  timestamp: number
}
```

**æˆåŠŸæ¶ˆæ¯**:
```typescript
{
  id: number
  type: 'sent'
  messageType: 'system'
  content: `ğŸ‰ ${gameTypeName}æˆåŠŸï¼ç­”æ¡ˆæ˜¯ã€Œ${topic}ã€`
  time: string
  timestamp: number
}
```

## æ ¸å¿ƒé€»è¾‘

### ç­”æ¡ˆåˆ¤æ–­ç®—æ³•

```typescript
function isAnswerCorrect(aiResponse: string, correctAnswer: string): boolean {
  // 1. æ ‡å‡†åŒ–æ–‡æœ¬
  const normalizedResponse = normalizeText(aiResponse)
  const normalizedAnswer = normalizeText(correctAnswer)
  
  // 2. ç›´æ¥åŒ¹é…
  if (normalizedResponse.includes(normalizedAnswer)) {
    return true
  }
  
  // 3. åŒä¹‰è¯åŒ¹é…
  const synonyms = getSynonyms(correctAnswer)
  for (const synonym of synonyms) {
    if (normalizedResponse.includes(normalizeText(synonym))) {
      return true
    }
  }
  
  return false
}

function normalizeText(text: string): string {
  return text
    .toLowerCase()
    .replace(/[ï¼Œã€‚ï¼ï¼Ÿã€ï¼›ï¼š""''ï¼ˆï¼‰ã€Šã€‹ã€ã€‘\s,\.!?;:()"'<>\[\]]/g, '')
}
```

### æ¸¸æˆæµç¨‹

**å¯åŠ¨æ¸¸æˆ**:
```typescript
function startGame(type: 'draw' | 'act') {
  setGameType(type)
  setTopic(getRandomTopic(type))
  setShowPanel(true)
  setShowGameSelect(false)
  // æ¸…ç†ä¹‹å‰çš„æ•°æ®
  canvasDataRef.current = null
  descriptionRef.current = ''
}
```

**å‘é€ç”»ä½œ**:
```typescript
function sendDrawing(imageData: string) {
  // 1. åˆ›å»ºæ¶ˆæ¯
  const message = createDrawingMessage(imageData, topic)
  
  // 2. ä¿å­˜æ¶ˆæ¯
  setMessages(prev => [...prev, message])
  saveMessages(characterId, [...messages, message])
  
  // 3. å…³é—­ç”»æ¿ä½†ä¿ç•™é¢˜ç›®å¡ç‰‡
  setShowPanel(false)
  
  // 4. è§¦å‘AIå›å¤ï¼ˆç”±ChatDetailçš„ç°æœ‰é€»è¾‘å¤„ç†ï¼‰
  // AIå›å¤åä¼šè§¦å‘checkAnswer
}
```

**æ£€æŸ¥ç­”æ¡ˆ**:
```typescript
function checkAnswer(aiResponse: string) {
  if (!topic || !gameType) return
  
  // åˆ¤æ–­ç­”æ¡ˆ
  if (isAnswerCorrect(aiResponse, topic)) {
    // çŒœå¯¹äº†ï¼Œå‘é€æˆåŠŸæ¶ˆæ¯
    const successMessage = createSuccessMessage(gameType, topic)
    setMessages(prev => [...prev, successMessage])
    saveMessages(characterId, [...messages, successMessage])
    
    // ç»“æŸæ¸¸æˆ
    endGame()
  }
  // çŒœé”™äº†ï¼Œä¸åšä»»ä½•æ“ä½œï¼Œä¿æŒæ¸¸æˆçŠ¶æ€
}
```

**ç»“æŸæ¸¸æˆ**:
```typescript
function endGame() {
  setGameType(null)
  setTopic('')
  setShowPanel(false)
  canvasDataRef.current = null
  descriptionRef.current = ''
}
```

### AIå›å¤ç›‘å¬

åœ¨ `ChatDetail` ç»„ä»¶ä¸­ï¼Œéœ€è¦ç›‘å¬AIçš„æ–°å›å¤ï¼š

```typescript
useEffect(() => {
  // å½“æœ‰æ–°çš„AIå›å¤æ—¶
  const lastMessage = messages[messages.length - 1]
  if (lastMessage?.type === 'received' && gameType && topic) {
    // æ£€æŸ¥ç­”æ¡ˆ
    checkAnswer(lastMessage.content)
  }
}, [messages, gameType, topic])
```

## é”™è¯¯å¤„ç†

### 1. ç”»å¸ƒä¸ºç©º
- **åœºæ™¯**: ç”¨æˆ·æœªç»˜ç”»å°±ç‚¹å‡»å‘é€
- **å¤„ç†**: ç¦ç”¨å‘é€æŒ‰é’®ï¼Œç›´åˆ°ç”¨æˆ·å¼€å§‹ç»˜ç”»

### 2. æè¿°ä¸ºç©º
- **åœºæ™¯**: ç”¨æˆ·æœªè¾“å…¥æè¿°å°±ç‚¹å‡»å‘é€
- **å¤„ç†**: ç¦ç”¨å‘é€æŒ‰é’®ï¼Œç›´åˆ°ç”¨æˆ·è¾“å…¥å†…å®¹

### 3. AIå›å¤å¼‚å¸¸
- **åœºæ™¯**: AIå›å¤ä¸ºç©ºæˆ–å‡ºé”™
- **å¤„ç†**: ä¸è¿›è¡Œç­”æ¡ˆåˆ¤æ–­ï¼Œä¿æŒæ¸¸æˆçŠ¶æ€ï¼Œå…è®¸ç”¨æˆ·ç»§ç»­å°è¯•

### 4. é¢˜ç›®ç”Ÿæˆå¤±è´¥
- **åœºæ™¯**: é¢˜åº“ä¸ºç©ºæˆ–éšæœºå‡½æ•°å‡ºé”™
- **å¤„ç†**: ä½¿ç”¨é»˜è®¤é¢˜ç›®"çŒ«"æˆ–"è·‘æ­¥"

## æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•

**Answer Matcher æµ‹è¯•**:
```typescript
describe('AnswerMatcher', () => {
  test('ç›´æ¥åŒ¹é… - å®Œå…¨ç›¸åŒ', () => {
    expect(isAnswerCorrect('æˆ‘çŒœæ˜¯çŒ«', 'çŒ«')).toBe(true)
  })
  
  test('ç›´æ¥åŒ¹é… - åŒ…å«ç­”æ¡ˆ', () => {
    expect(isAnswerCorrect('è¿™åº”è¯¥æ˜¯ä¸€åªçŒ«å§', 'çŒ«')).toBe(true)
  })
  
  test('å¿½ç•¥æ ‡ç‚¹ç¬¦å·', () => {
    expect(isAnswerCorrect('æˆ‘çŒœæ˜¯ï¼šçŒ«ï¼', 'çŒ«')).toBe(true)
  })
  
  test('å¿½ç•¥ç©ºæ ¼', () => {
    expect(isAnswerCorrect('æˆ‘çŒœæ˜¯ æ±½ è½¦', 'æ±½è½¦')).toBe(true)
  })
  
  test('åŒä¹‰è¯åŒ¹é…', () => {
    expect(isAnswerCorrect('è¿™æ˜¯ä¸€è¾†è½¦', 'æ±½è½¦')).toBe(true)
  })
  
  test('é”™è¯¯ç­”æ¡ˆ', () => {
    expect(isAnswerCorrect('è¿™æ˜¯ä¸€åªç‹—', 'çŒ«')).toBe(false)
  })
})
```

**æ¸¸æˆæµç¨‹æµ‹è¯•**:
```typescript
describe('useTacitGame', () => {
  test('å¯åŠ¨æ¸¸æˆåº”è¯¥ç”Ÿæˆé¢˜ç›®', () => {
    const { result } = renderHook(() => useTacitGame(props))
    act(() => result.current.startGame('draw'))
    expect(result.current.topic).toBeTruthy()
    expect(result.current.gameType).toBe('draw')
  })
  
  test('æ¢é¢˜åº”è¯¥ç”Ÿæˆæ–°é¢˜ç›®', () => {
    const { result } = renderHook(() => useTacitGame(props))
    act(() => result.current.startGame('draw'))
    const oldTopic = result.current.topic
    act(() => result.current.changeTopic())
    expect(result.current.topic).not.toBe(oldTopic)
  })
  
  test('å‘é€ç”»ä½œåº”è¯¥å…³é—­ç”»æ¿', () => {
    const { result } = renderHook(() => useTacitGame(props))
    act(() => result.current.startGame('draw'))
    act(() => result.current.sendDrawing('data:image/png;base64,...'))
    expect(result.current.showPanel).toBe(false)
  })
})
```

### é›†æˆæµ‹è¯•

1. **å®Œæ•´æ¸¸æˆæµç¨‹æµ‹è¯•**:
   - å¯åŠ¨æ¸¸æˆ â†’ ç”»ç”» â†’ å‘é€ â†’ AIçŒœå¯¹ â†’ æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯ â†’ æ¸¸æˆç»“æŸ

2. **å¤šè½®å°è¯•æµ‹è¯•**:
   - å¯åŠ¨æ¸¸æˆ â†’ ç”»ç”» â†’ å‘é€ â†’ AIçŒœé”™ â†’ ç»§ç»­ç”» â†’ å‘é€ â†’ AIçŒœå¯¹ â†’ æ¸¸æˆç»“æŸ

3. **ç”»æ¿çŠ¶æ€æŒä¹…åŒ–æµ‹è¯•**:
   - ç”»ç”» â†’ å…³é—­ç”»æ¿ â†’ é‡æ–°æ‰“å¼€ â†’ éªŒè¯ç”»å¸ƒå†…å®¹æ¢å¤

### ç”¨æˆ·ä½“éªŒæµ‹è¯•

1. æµ‹è¯•AIçŒœæµ‹çš„å‡†ç¡®æ€§ï¼ˆé€šè¿‡ä¸åŒè´¨é‡çš„ç”»ä½œï¼‰
2. æµ‹è¯•ç­”æ¡ˆåŒ¹é…çš„å‡†ç¡®æ€§ï¼ˆå„ç§è¡¨è¾¾æ–¹å¼ï¼‰
3. æµ‹è¯•æ¸¸æˆæµç¨‹çš„æµç•…æ€§ï¼ˆæ— å¡é¡¿ã€æ— éœ€æ‰‹åŠ¨ç¡®è®¤ï¼‰

## æ€§èƒ½è€ƒè™‘

1. **ç­”æ¡ˆåˆ¤æ–­**: åœ¨AIå›å¤åç«‹å³æ‰§è¡Œï¼Œä½¿ç”¨ç®€å•çš„å­—ç¬¦ä¸²åŒ¹é…ï¼Œæ€§èƒ½å¼€é”€å¯å¿½ç•¥
2. **ç”»å¸ƒä¿å­˜**: ä½¿ç”¨refå­˜å‚¨ï¼Œé¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
3. **åŒä¹‰è¯æŸ¥æ‰¾**: ä½¿ç”¨Mapæ•°æ®ç»“æ„ï¼ŒO(1)æŸ¥æ‰¾æ—¶é—´

## å®‰å…¨è€ƒè™‘

1. **è¾“å…¥éªŒè¯**: é™åˆ¶æè¿°æ–‡æœ¬é•¿åº¦ï¼ˆ50å­—ç¬¦ï¼‰
2. **XSSé˜²æŠ¤**: æ‰€æœ‰ç”¨æˆ·è¾“å…¥åœ¨æ˜¾ç¤ºå‰è¿›è¡Œè½¬ä¹‰
3. **æ•°æ®æ¸…ç†**: æ¸¸æˆç»“æŸæ—¶æ¸…ç†æ‰€æœ‰ä¸´æ—¶æ•°æ®

## è¿ç§»è®¡åˆ’

### å‘åå…¼å®¹

- ä¿æŒç°æœ‰çš„æ¶ˆæ¯æ ¼å¼
- ä¿æŒç°æœ‰çš„ç»„ä»¶æ¥å£
- ä»…ä¿®æ”¹å†…éƒ¨é€»è¾‘

### è¿ç§»æ­¥éª¤

1. åˆ›å»ºæ–°çš„ `answerMatcher.ts` å·¥å…·æ¨¡å—
2. ä¿®æ”¹ `useTacitGame.ts` Hookï¼Œæ·»åŠ ç­”æ¡ˆåˆ¤æ–­é€»è¾‘
3. ä¿®æ”¹ `TacitTopicCard` ç»„ä»¶ï¼Œç§»é™¤"çŒœå¯¹äº†"æŒ‰é’®
4. ç®€åŒ–AIæç¤ºè¯
5. åœ¨ `ChatDetail` ä¸­æ·»åŠ AIå›å¤ç›‘å¬
6. æµ‹è¯•å®Œæ•´æµç¨‹
7. æ¸…ç†æ—§ä»£ç 

## æœªæ¥æ‰©å±•

1. **éš¾åº¦ç­‰çº§**: ç®€å•/ä¸­ç­‰/å›°éš¾é¢˜ç›®
2. **è®¡æ—¶åŠŸèƒ½**: é™æ—¶çŒœæµ‹å¢åŠ æŒ‘æˆ˜
3. **æç¤ºç³»ç»Ÿ**: AIçŒœé”™åç»™å‡ºæç¤º
4. **å¤šäººæ¨¡å¼**: æ”¯æŒå¤šä¸ªAIè§’è‰²åŒæ—¶çŒœæµ‹
5. **é¢˜ç›®è‡ªå®šä¹‰**: å…è®¸ç”¨æˆ·æ·»åŠ è‡ªå·±çš„é¢˜ç›®
6. **ç»Ÿè®¡åŠŸèƒ½**: è®°å½•æ¸¸æˆèƒœç‡ã€ç”¨æ—¶ç­‰æ•°æ®
